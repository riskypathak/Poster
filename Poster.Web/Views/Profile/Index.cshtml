@model Poster.Data.Models.Profile
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var userProfileList = ViewBag.userProfileList;
}

<h2>Profile</h2>
@using (Html.BeginForm("Add", "Profile", FormMethod.Post))
{
    <div class="panel panel-default">
        <div class="panel-heading">Add Profile</div>
        <div class="panel-body">
            <div class="form-group row">
                <div class="col-md-3">Profile Type:</div>
                <div class="col-md-9">
                    @Html.DropDownListFor(x => x.ProfileTypeID, new SelectList(ViewBag.ProfileTypeList, "Id", "Name"), new { @class = "form-control", @required = "required" })
                </div>
            </div>
            <div class="form-group row">
                <div class="col-md-3">
                    Username
                </div>
                <div class="col-md-9">
                    @Html.TextBoxFor(x => x.Username, new { @class = "form-control", @required = "required" })
                </div>
            </div>
            <div class="form-group row">
                <div class="col-md-3"></div>
                <div class="col-md-9">
                    <input type="submit" name="Register" value="Register" />

                </div>
            </div>

        </div>
    </div>
    @Html.HiddenFor(x => x.Id)
    <div  class="panel panel-default">
        <div class="panel-heading">User Profile List</div>
        <div class="panel-body">

            <table id="ListTable" class="display">
                <thead>
                    <tr>
                        <td>Profile Type</td>
                        <td>Username</td>
                        <td>Action</td>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in userProfileList)
                    {
                        <tr>
                            <td>
                                @item.ProfileName.Name
                            </td>
                            <td>
                                @item.Username
                            </td>
                            <td>
                                <input type="button" name="name" onclick="DeleteProfile(@item.Id)" class="btn btn-primary" value="Unregister" />
                            </td>
                        </tr>

                    }
                </tbody>
            </table>

        </div>
    </div>
}
<script>
     //EDIT CODE COMMENTED
    //function EditProfile(profileTypeid, username, id) {
    //    $("#ProfileTypeID").val(profileTypeid);
    //    $("#Username").val(username);
    //    $("#Id").val(id)
    //}
    function DeleteProfile(id) {
        if(confirm("Do you want to delete record?"))
            location.href = "/Profile/Delete/"+id;
    }
</script>